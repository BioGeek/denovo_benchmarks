Bootstrap: docker
From: ytp22/pi-helixnovo-env:v1

%files
    # Copy algorithm-related files to a separate dir /algo.
    # Don't change the dir name.
    algorithms/pi-HelixNovo /algo
    algorithms/base /algo/base

%post
    # Download algorithm source code & Download algorithm weights
    cd /algo
    git clone https://github.com/PHOENIXcenter/pi-HelixNovo.git -b pi-HelixNovo-for-DenovoBenchmarks

%post
    # Make sure make_predictions.sh file is executable.
    chmod +x /algo/make_predictions.sh

# Run algorithm and convert outputs.
# Data is expected to be mounted into /algo/data dir.
%runscript
    cd /algo && ./make_predictions.sh data
    # De novo peptide results are generated as /algo/outputs.csv
